<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Cafe Billing System</title>
</head>

<body>

    <h2>Smart Cafe Billing System</h2>
    <div id="output"></div>

    <script>

        function print(msg) {
            document.getElementById("output").innerHTML += msg + "<br />"
            console.log(msg)
        }

        // Place Order System with GST, Discount, and Café Report

        let sum = 0,
            items = 0,
            disc = 0,
            minPrice = Infinity,
            maxPrice = -Infinity;

        let choice;

        do {
            print('1. Coffee (₹50)');
            print('2. Tea (₹30)');
            print('3. Sandwich (₹80)');
            print('4. Pastry (₹100)');
            print('0. Exit');

            choice = parseInt(prompt('Enter your choice: '));

            let price = 0;

            if (choice === 1) {
                price = 50;
                print("You've ordered Coffee. Price: 50");
            } else if (choice === 2) {
                price = 30;
                print("You've ordered Tea. Price: 30");
            } else if (choice === 3) {
                price = 80;
                print("You've ordered Sandwich. Price: 80");
            } else if (choice === 4) {
                price = 100;
                print("You've ordered Pastry. Price: 100");
            } else if (choice === 0) {
                print('Thank you, visit again');
                break;
            } else {
                print('Invalid choice');
            }

            if (price > 0) {
                sum += price;
                items++;
                if (price < minPrice) minPrice = price;
                if (price > maxPrice) maxPrice = price;
            }

        } while (choice != 0);

        // Apply discount
        if (sum > 1000) {
            disc = sum * 0.20;
        } else if (sum > 500) {
            disc = sum * 0.10;
        } else {
            print('No discount');
        }

        // Billing
        print(`\nYou've ordered ${items} items`);
        print(`Subtotal: ₹${sum}`);
        print(`Discount: ₹${disc}`);

        let gst = (sum - disc) * 0.05;
        print(`GST: ₹${gst.toFixed(2)}`);

        let totalBill = (sum - disc) + gst;
        print(`Your total bill is: ₹${totalBill.toFixed(2)}`);

        // Café Report
        if (items > 0) {
            let averagePrice = sum / items;
            print("\n Café Report");
            print(`Total Items Sold: ${items}`);
            print(`Highest Price Item: ₹${maxPrice}`);
            print(`Lowest Price Item: ₹${minPrice}`);
            print(`Average Price: ₹${averagePrice.toFixed(2)}`);
        } else {
            print("\n Café Report");
            print("No sales made.");
        }

        // Change pwd

        let current_password = '1234'
        let user = prompt('Enter your current password: ')

        let new_pass, confirm_pass

        if (user === current_password) {
            new_pass = prompt('Enter your new password: ')
            confirm_pass = prompt('Confirm your new password: ')

            if (new_pass === confirm_pass) {
                current_password = new_pass
                print('New password set successfully')
            } else {
                print('New password and confirmation password do not match')
            }
        } else {
            print("Your current password doesn't match")
        }
    </script>
</body>

</html>